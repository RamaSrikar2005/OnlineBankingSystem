<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fund Transfer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="login-bg">

<div class="form-container">
    <h1>Fund Transfer</h1>

    <input type="number" id="from_account" placeholder="From Account ID" required>
    <input type="number" id="to_account" placeholder="To Account ID" required>
    <input type="number" id="amount" placeholder="Amount" required>

    <button onclick="transferFunds()">Transfer</button>

    <p id="transfer_message"></p>

    <button onclick="window.location.href='/dashboard'">
        Back to Dashboard
    </button>
</div>

<script>
function transferFunds() {
    const from_account = document.getElementById("from_account").value;
    const to_account = document.getElementById("to_account").value;
    const amount = document.getElementById("amount").value;
    const msg = document.getElementById("transfer_message");

    if (!from_account || !to_account || !amount) {
        msg.innerText = "All fields are required";
        return;
    }

    fetch("/api/account/transfer", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            from_account: from_account,
            to_account: to_account,
            amount: amount
        })
    })
    .then(res => res.json())
    .then(data => {
        msg.innerText = data.message || data.error;
    })
    .catch(() => {
        msg.innerText = "Server error";
    });
}


</script>

<script>
    // ðŸ”’ protect page
    if (!localStorage.getItem("user_id")) {
        window.location.href = "/login";
    }
</script>

</body>
</html>
